import random
import nltk
from nltk.tokenize import word_tokenize
from nltk.corpus import stopwords

nltk.download("punkt")
nltk.download("stopwords")

# قاعدة بيانات للردود

responses = {
    "السلام عليكم": "عليكم السلام كيف يمكنني مساعدتك؟",
    "ما هي الضرائب؟": "الضرائب هي رسوم مالية تفرضها الحكومة على الأفراد والشركات لتمويل الخدمات العامة.",
    "ما هي ضريبة القيمة المضافة؟": "ضريبة القيمة المضافة (VAT) هي ضريبة تفرض على السلع والخدمات في كل مرحلة من مراحل الإنتاج أو التوزيع.",
    "كيف أحسب ضريبة الدخل؟": "تحسب ضريبة الدخل بناءً على الدخل السنوي وفقًا للفئات الضريبية المحددة من قبل الحكومة.",
    "ما هي ضريبة الشركات؟": "ضريبة الشركات هي ضريبة تفرض على أرباح الشركات التجارية التي يتم تحقيقها من خلال الأنشطة التجارية.",
    "كيف يتم تحديد معدل ضريبة الدخل؟": "معدل ضريبة الدخل يعتمد على شريحة الدخل التي يحققها الفرد أو الشركة، ويتم تحديده وفقًا لقوانين الضريبة المحلية.",
    "ما هي ضريبة الميراث؟": "ضريبة الميراث هي ضريبة تفرض على الممتلكات التي يتم توريثها بعد وفاة شخص ما.",
    "كيف يمكنني تقديم إقرار ضريبي؟": "يمكنك تقديم إقرار ضريبي إلكترونيًا من خلال موقع الهيئة الضريبية أو من خلال التقديم الورقي في المكاتب المعتمدة.",
    "ما هو الإقرار الضريبي؟": "الإقرار الضريبي هو وثيقة تقدمها الشركات أو الأفراد إلى السلطات الضريبية لإظهار دخلهم ونفقاتهم والضرائب المستحقة عليهم.",
    "هل يمكنني خصم نفقات الأعمال من الدخل؟": "نعم، يمكن خصم النفقات المتعلقة بالأعمال التجارية مثل الرواتب والإيجارات من الدخل الخاضع للضريبة.",
    "ما هي الضرائب المباشرة؟": "الضرائب المباشرة هي الضرائب التي تفرض على الدخل أو الممتلكات بشكل مباشر مثل ضريبة الدخل.",
    "ما هي الضرائب غير المباشرة؟": "الضرائب غير المباشرة هي الضرائب التي تفرض على السلع والخدمات، مثل ضريبة القيمة المضافة.",
    "ما هو الرقم الضريبي؟": "الرقم الضريبي هو رقم مخصص من قبل الهيئة الضريبية لكل فرد أو شركة لتتبع معاملات الضرائب.",
    "كيف يمكنني تجنب دفع ضرائب؟": "لا يمكن تجنب دفع الضرائب بشكل قانوني، ولكن يمكن استخدام أساليب قانونية مثل الخصومات الضريبية لتقليل المبلغ المستحق.",
    "ما هي ضريبة الدخل الشخصي؟": "ضريبة الدخل الشخصي هي ضريبة تفرض على الدخل الذي يحصل عليه الأفراد من مصادر مختلفة مثل الرواتب أو الاستثمارات.",
    "هل يمكن للأعمال الصغيرة الحصول على خصومات ضريبية؟": "نعم، يمكن للأعمال الصغيرة الحصول على خصومات ضريبية تتعلق بالنفقات التشغيلية مثل المعدات أو الإيجارات.",
    "كيف يتم حساب ضريبة الشركات؟": "تتم حساب ضريبة الشركات بناءً على الأرباح الصافية التي تحققها الشركة، بعد خصم التكاليف والمصروفات.",
    "ما هي ضريبة المبيعات؟": "ضريبة المبيعات هي ضريبة تفرض على السلع والخدمات المباعة، وتتم إضافتها إلى السعر عند الشراء.",
    "هل يتم فرض ضرائب على الهدايا؟": "نعم، في بعض الحالات يتم فرض ضرائب على الهدايا إذا كانت قيمتها تتجاوز حدًا معينًا.",
    "ما هي ضريبة الدخل العالمية؟": "ضريبة الدخل العالمية هي الضريبة التي تفرض على الدخل المكتسب من قبل الأفراد أو الشركات في الخارج.",
    "كيف يمكنني طلب استرداد الضريبة؟": "يمكنك طلب استرداد الضريبة من خلال تقديم طلب استرداد عبر الموقع الإلكتروني للهيئة الضريبية أو في المكاتب المعتمدة.",
    "هل يمكنني تعديل إقراري الضريبي بعد تقديمه؟": "نعم، في بعض الحالات يمكن تعديل الإقرار الضريبي بعد تقديمه، ولكن يجب تقديم التعديلات في الوقت المحدد.",
    "ما هي الخصومات الضريبية؟": "الخصومات الضريبية هي المبالغ التي يتم خصمها من الدخل الإجمالي قبل حساب الضريبة المستحقة.",
    "هل يمكنني خصم التبرعات الخيرية من ضرائبي؟": "نعم، يمكن خصم التبرعات الخيرية المؤهلة من الضرائب في العديد من الأنظمة الضريبية.",
    "ما هي الضرائب على العقارات؟": "الضرائب على العقارات هي الضرائب التي يتم فرضها على قيمة الممتلكات العقارية مثل المنازل أو الأراضي.",
    "كيف تؤثر الضرائب على الاقتصاد؟": "الضرائب تؤثر على الاقتصاد من خلال توفير الإيرادات التي تستخدمها الحكومة لتمويل الخدمات العامة والاستثمارات في البنية التحتية.",
    "ما هي ضريبة القيمة المضافة على الصادرات؟": "عادة ما تكون الصادرات معفاة من ضريبة القيمة المضافة في العديد من الدول لتشجيع التجارة الدولية.",
    "هل هناك ضرائب على الأرباح الرأسمالية؟": "نعم، في بعض البلدان يتم فرض ضرائب على الأرباح التي تتحقق من بيع الأصول مثل الأسهم أو العقارات.",
    "ما هي ضريبة التحسينات العقارية؟": "ضريبة التحسينات العقارية هي ضريبة تفرض على القيمة المتزايدة للعقارات بسبب أعمال التحسين أو التطوير.",
    "كيف أقدم اعتراضًا على تقدير الضرائب؟": "يمكنك تقديم اعتراض على تقدير الضرائب من خلال تقديم طلب مراجعة للهيئة الضريبية في الوقت المحدد.",
    "هل توجد ضرائب على الدخل من الأعمال الحرة؟": "نعم، يتم فرض ضرائب على الدخل الذي يحققه الأفراد من الأعمال الحرة.",
    "ما هي فئات الدخل التي تخضع لضريبة الدخل؟": "الدخل الخاضع لضريبة الدخل يشمل الأجور، والرواتب، والأرباح التجارية، والدخل من الاستثمارات.",
    "هل تدفع الشركات ضرائب على إيراداتها؟": "نعم، الشركات تدفع ضرائب على إيراداتها بعد خصم التكاليف والمصروفات.",
    "ما هي ضرائب التوظيف؟": "ضرائب التوظيف هي الضرائب التي تقتطع من الأجور والرواتب وتذهب إلى تمويل برامج الضمان الاجتماعي والتأمين الصحي.",
    "هل يمكنني تخفيض ضريبتي إذا كنت طالبًا؟": "نعم، في بعض الأنظمة الضريبية، يمكن للطلاب الحصول على خصومات ضريبية على أساس تعليمهم أو نفقاتهم التعليمية.",
    "كيف تؤثر الضرائب على الاستثمارات؟": "الضرائب يمكن أن تؤثر على العوائد الاستثمارية، حيث أن بعض الاستثمارات قد تخضع لضريبة على الأرباح الرأسمالية أو دخل الفائدة.",
    "هل يمكنني تخفيض ضريبة الدخل من خلال التوفير في التقاعد؟": "نعم، في بعض الأنظمة الضريبية، يمكن تقليل ضريبة الدخل من خلال التبرعات لصناديق التقاعد المعفاة من الضرائب.",
    "هل يمكنني خصم المصاريف الطبية من ضرائبي؟": "نعم، في بعض الحالات، يمكن خصم المصاريف الطبية إذا كانت تتجاوز نسبة معينة من الدخل.",
    "ما هي ضريبة الرواتب؟": "ضريبة الرواتب هي الضريبة التي يتم اقتطاعها من الرواتب والأجور من قبل صاحب العمل وتحويلها إلى الهيئة الضريبية.",
    "هل يمكنني تقديم إقرار ضريبي إذا لم أحقق دخلًا؟": "نعم، يمكن تقديم الإقرار الضريبي حتى إذا لم تحقق دخلاً، خاصة إذا كان لديك استحقاقات ضريبية أو خصومات.",
    "ما هي ضريبة الإنتاج؟": "ضريبة الإنتاج هي ضريبة تفرض على السلع أو الخدمات خلال مراحل الإنتاج أو التصنيع.",
    "كيف يمكنني حساب ضريبة القيمة المضافة؟": "لحساب ضريبة القيمة المضافة، يتم ضرب سعر السلع أو الخدمات في نسبة الضريبة المحددة من قبل الحكومة.",
    "ما هي ضريبة الفائدة على القروض؟": "ضريبة الفائدة هي الضريبة المفروضة على الفوائد المدفوعة على القروض أو الديون.",
    "ما هو النظام الضريبي التقديري؟": "النظام الضريبي التقديري هو نظام يتم فيه تقدير الضريبة المستحقة بناءً على معلومات تقديرية وليس بناءً على سجلات فعلية.",
    "هل يمكنني تقسيط الضرائب؟": "نعم، في بعض الأنظمة الضريبية يمكن تقسيط الضرائب المستحقة على عدة دفعات.",
    "ما هي الضريبة على السيارات؟": "الضريبة على السيارات هي ضريبة تفرض على مالكي المركبات حسب نوع السيارة وحجمها واستخدامها.",
    "ما هو معدل ضريبة الدخل للشركات الصغيرة؟": "معدل ضريبة الدخل للشركات الصغيرة يختلف حسب القوانين المحلية، وغالبًا ما يكون أقل من المعدلات التي تفرض على الشركات الكبيرة.",
    "كيف يتم فرض ضريبة على الأجور؟": "ضريبة الأجور يتم اقتطاعها مباشرة من الرواتب والأجور من قبل صاحب العمل قبل دفع الأجر للعامل.",
    "هل تختلف الضرائب باختلاف الدولة؟": "نعم، تختلف الضرائب بشكل كبير من دولة إلى أخرى بناءً على السياسات الضريبية المتبعة.",
    "ما هو مفهوم التحايل الضريبي؟": "التحايل الضريبي هو استخدام أساليب غير قانونية للتهرب من دفع الضرائب المستحقة.",
    "هل يجوز الطعن في قرارات الضرائب؟": "نعم، يمكن للطعن في قرارات الضرائب من خلال تقديم استئناف للهيئة الضريبية أو اللجوء إلى القضاء.",
    "ما هي ضرائب القيمة المضافة الدولية؟": "ضرائب القيمة المضافة الدولية هي ضرائب تفرض على السلع والخدمات المتداولة بين الدول المختلفة.",
    "كيف تؤثر الضرائب على الاستثمار الأجنبي؟": "الضرائب تؤثر على جذب الاستثمار الأجنبي، حيث أن الأنظمة الضريبية الميسرة تشجع الشركات الأجنبية على الاستثمار في البلد.",
    "هل يتم فرض ضريبة على الإيجارات؟": "نعم، في بعض البلدان يتم فرض ضريبة على الدخل الناتج عن الإيجارات العقارية.",
}



def get_response(user_input):
    user_input = user_input.lower()
    words = word_tokenize(user_input)
    words = [word for word in words if word not in stopwords.words("arabic")]

    for question, answer in responses.items():
        if all(word in question.lower() for word in words):
            return answer

    return random.choice(["عذرًا، لم أفهم سؤالك. حاول مرة أخرى.", "يرجى توضيح استفسارك أكثر."])
